"use strict";(("undefined"!=typeof window?window:this).__LOADABLE_LOADED_CHUNKS__=("undefined"!=typeof window?window:this).__LOADABLE_LOADED_CHUNKS__||[]).push([[9699],{30398:(e,t,o)=>{o.r(t),o.d(t,{HelpCenterProvider:()=>E,useHelpCenter:()=>d}),o(33948),o(38862);var n=o(67294),s=o(41349),r=o(49932),a=o(29534),i=o(41941),l=o(75268),c=o(82088);const[d,h]=(0,i.k)({isChatAgentAvailable:!1,initialize:()=>Promise.resolve(),showHelpCenterFromUrl:()=>Promise.resolve(),showHelpCenterShell:()=>Promise.resolve(),showHelpCenterChat:()=>Promise.resolve(),showHelpCenterFaq:()=>Promise.resolve(),trackEvent:()=>Promise.resolve(),unreadMessagesCount:0,ongoingChatSession:!1,destroyOngoingChat:!1}),u=()=>{const e=(()=>{const e=(new l.Z).getData(a.Q.HELP_CENTER_CHAT_STATE);if(!e)return{};try{return JSON.parse(e,((e,t)=>"string"==typeof t?JSON.parse(t):t))}catch(e){return console.error("Error getting the chat state: ",e),{}}})(),{behavior:{sessionId:t=null}={}}=e;return!!t},C=()=>{const e=(new l.Z).getData(a.Q.HELP_CENTER_SHELL_STATE);if(!e)return{};try{return JSON.parse(e)}catch(e){return console.error("Error getting the shell state: ",e),{}}},p=()=>{if(u()){const{unreadNotificationsTotal:e=0}=C();return e}return 0},m=e=>{window.dispatchEvent(new CustomEvent("TRACKING_TRACK_EVENT",{bubbles:!0,cancelable:!1,composed:!0,detail:e}))},w=(e,t,o,n,s)=>(n(!0),o(!0),t(!1),((e,t)=>(window.dispatchEvent(new CustomEvent("HC_WIDGET_ACTIVATE_REQUEST",{bubbles:!0,cancelable:!1,composed:!0,detail:{payload:{...t},target:e}})),Promise.resolve("Help center activated for module ".concat(e))))(e,s)),g=e=>window.helpCenterReady?Promise.resolve():new Promise((t=>{(e=>window.helpCenterScriptLoaded?Promise.resolve():new Promise((t=>{const{configuration:o,nonce:n}=e,{host:s}=o,r=document.createElement("script");r.src="".concat(s.baryonHostBaseUrl,"/mfr/").concat(s.hostApp,".js"),r.setAttribute("nonce",n),r.async=!0,r.defer=!0,document.body.appendChild(r),r.addEventListener("load",(()=>{window.helpCenterScriptLoaded=!0,t("Remote script loaded")}))})))(e).then((()=>{(e=>window.helpCenterAssembled?Promise.resolve():new Promise(((t,o)=>{try{const{csrf:o}=e,n=(e=>{const{csrf:t,nonce:o,requestDetails:n,session:r,servletName:a}=e,i=e.configuration,{chat:l,elevio:d,host:h}=i,{account:u}=r,C=("product_detail"===a||"things_to_do"===a)&&!l.isSalesChatSupported;return window.helpCenterAuth=()=>{(0,c.$J)(s.y$.HOMEPAGE)},{authHooks:{onLoginRequest:()=>window.helpCenterAuth()},hcServletName:a,bypassToken:i.isToBypassToken,isTap:i.isTap,hcShoppingCartContextJson:i.shoppingCartContextJson,hcTAPersistentCookie:r.tapersistentCookie,hcMCID:r.mcid,isUserAuthenticated:r.isUserAuthenticated,locale:r.languageCode,nonce:o,hcHostSecurityTokenName:t.headerName,hcHostSecurityTokenValue:t.token,hcChatInitialChatChannel:l.chatInitialChatChannel,hcChatInitialContactPoint:l.chatInitialContactPoint,hcChatIssueTokenUrl:l.chatIssueTokenUrl,hcPreChatFormEnabled:l.isPreChatFormEnabled,hostApp:h.hostApp,hcIpAddress:h.ipAddress,hcLocation:h.location,theme:h.hostApp,elevioCompanyId:d.elevioCompanyId,faqClient:d.faqClient,elevioSupportedLocales:d.elevioSupportedLocales,hcPUID:n.puid,hcUUID:n.uuid,hcSessionId:n.sessionId,hcLandingPage:n.landingPage,hcLandingPageReferrer:n.landingPageReferrer,hcVisitorId:n.visitorId,hcIsFullLogin:u&&u.isFullLogin,hcIsPartialLogin:u&&u.isPartialLogin,hcItineraryId:u&&u.itineraryId,hcAccountId:u&&u.accountId,user:{email:u&&u.emailAddress,firstName:u&&u.firstName,lastName:u&&u.lastName,phoneNumberFull:u&&u.phoneNumberFull,username:u&&u.username},...C&&{isChatCreatable:!1}}})(e);window.MicrofrontendsAssemblyService.assemble(n,[{resources:{dynamic:{headers:()=>({"X-XSRF-TOKEN":o.token})}},selector:"hc-mmb-lite"}]),window.helpCenterAssembled=!0,t("Help center assembled")}catch(e){console.error("Help center assemble error: ",e),window.helpCenterAssembled=!1,o(e)}})))(e).then((()=>window.addEventListener("HC_WIDGET_READY",(()=>{window.helpCenterReady=!0,t("Help center is ready.")}))))}))})),E=e=>{const{children:t}=e,[o,s]=(0,n.useState)(0),[i,c]=(0,n.useState)(!1),[d,E]=(0,n.useState)(!1),[v,A]=(0,n.useState)(!1),[S,T]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if(window.helpCenterScriptLoaded=!1,window.helpCenterAssembled=!1,window.helpCenterReady=!1,s(p),c(u),e.configuration){const{configuration:{host:t},session:{locale:o}}=e;(0,r.u)(o,t.baryonHostBaseUrl).then((e=>{!0===e&&A(!0)}))}window.addEventListener("HC_WIDGET_UPDATE_UNREAD_NOTIFICATIONS_COUNT",(e=>{const{unreadNotificationsCount:t,from:o}=e.detail,n=C(),r=n.unreadNotificationsTotal;var i;void 0!==t&&void 0!==r&&(S||(n.unreadNotificationsTotal+=t,n.unreadNotificationsCounts[o]=(n.unreadNotificationsCounts[o]||0)+t,i=n,(new l.Z).setData(a.Q.HELP_CENTER_SHELL_STATE,JSON.stringify(i))),s(r+t))}))}),[]);const _=()=>g(e),f=()=>{var t;const o=null===(t=e.configuration)||void 0===t?void 0:t.urlData;return o?g(e).then((()=>w(o.module,c,E,T,o.payloadParams))).then((()=>void 0!==o)):Promise.resolve(void 0!==o)},I=t=>g(e).then((()=>w("hc-help-shell",c,E,T,t))),P=t=>g(e).then((()=>w("hc-chat",c,E,T,t))),N=t=>g(e).then((()=>w("hc-faq",c,E,T,t))),y=(0,n.useMemo)((()=>({isChatAgentAvailable:v,initialize:_,showHelpCenterFromUrl:f,showHelpCenterShell:I,showHelpCenterChat:P,showHelpCenterFaq:N,trackEvent:m,unreadMessagesCount:o,ongoingChatSession:i,destroyOngoingChat:d})),[v,o,i,d]);return n.createElement(h.Provider,{value:y},t)}},49932:(e,t,o)=>{o.d(t,{u:()=>a});var n=o(9669),s=o.n(n),r=o(41349);const a=(e,t)=>{const o=e?"?locale=".concat(e):"",n="".concat(t).concat(r.BJ.SALES_AGENT_AVAILABILITY_CHECK).concat(o);return s().get(n,{withCredentials:!0}).then((e=>!0===e.data),(()=>!1))}},75268:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(4942),s=o(58339);class r{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,n.Z)(this,"storage",void 0);try{this.storage=e||window&&window.localStorage}catch(e){}}getData(e){return this.hasStorage()&&this.storage.getItem(e)||null}setData(e,t){if(this.hasStorage())try{t&&this.storage.setItem(e,t)}catch(e){}}hasStorage(){return!(0,s.J)(this.storage)}}}}]);